[[getting-started]]
== Getting started

By default, your site should be located in the project directory, or in the resources (i.e. `src/main/resources/`).

The default directory structure is:

image::roq-dirs.png[Roq directory structure]

// https://excalidraw.com/#json=VbxiMXccXfFuW0S2-nqnc,v3IIL7FZIpJqIsUshso-FQ


NOTE: The https://pages.quarkiverse.io/quarkus-roq/[Roq blog] is a good example of site made with Roq (https://github.com/quarkiverse/quarkus-roq/tree/main/blog[sources]).

=== Qute and FrontMatter

All templates can use the awesome type-safe https://quarkus.io/guides/qute-reference[Qute] template engine.

Templates for layout, documents and pages can declare a FrontMatter (referred as FM data) header delimited by  two `---`.
This header contains yaml data used to configure many things such as:

* Routing
* Data for the templates
* Content generation
* Pagination

=== Layouts and Partials

For your site, you will have one or more kind of pages, this is what we call "layouts", located by default in `templates/layouts/`. For example:

* `main`: the base layout for all kind of pages
* `page`: the layout of normal pages
* `post`: the layout for blog posts
* `recipe`: the layout for recipes or whatever

A layout can be included in pages and documents through the `layout` FrontMatter key (e.g. `layout: page`).

You can also prepare partial templates. They are located by default in `templates/partials/`. For example:

* `pagination.html`
* `head.html`

NOTE: if you don't already have layouts and partials in your project, <<install-theme>> or create your own templates (https://github.com/quarkiverse/quarkus-roq/tree/main/theme/default/src/main/resources/templates[example templates]).

[#install-theme]
=== Install a theme

To install a theme, simply add the dependency to your pom.xml. Example with Roq's default theme:
[source,xml,subs=attributes+]
----
<dependency>
    <groupId>io.quarkiverse.roq</groupId>
    <artifactId>quarkus-roq-theme-default</artifactId>
    <version>{project-version}</version>
</dependency>
----

It will provide templates, scripts and styles for your site. To use a layout, refer to it with `:theme/` prefix (there is an in the next part).

=== Site index template

Your site index template is required and should be located in `content/index.html`.

[source,html]
.content/index.html
----
---
title: Hello Roqers // <1>
description: It is time to start Roqing üé∏!
layout: :theme/main //<2>
---

<h1>Hello fellow Roqers ü§ò</h1>

<p>
  With Roq, it is very easy to a link to another.
  <a href="{site.url('/roq-bottom')}">page</a>. // <3>
</p>

----

<1> The index.html also describe your `site` information through a FrontMatter header.
<2> The layout to use (in this case `:theme/main` which refers to the `main` layout from the theme).
<3> We use the `{site.url(path)}` using Qute to resolve site urls, in this case it doesn't exist yet...

=== Variables

You can use Qute to access site and pages data. For this use the `site` and `page` variables:

* The `site` variable allow to access site global info from any page, document, layout or partial.
+
.Show attributes
[%collapsible]
====
[cols="1,1,1,1", options="header"]
|===
| Variable | Type | Description | Example

| `site.url`
| `RoqUrl`
| The Roq site URL
| `http://example.com/my-roq-site/`

| `site.imagesUrl`
| `RoqUrl`
| Directory to resolve images URL (e.g. /static/images)
| `http://example.com/static/images`

| `site.data`
| `JsonObject`
| The site FM data (declared in the index.html)
| `{"title": "My Site", "description": "A description"}`

| `site.pages`
| `java.util.List<NormalPage>`
| All the pages in this site (without the documents)
| `[Page1, Page2, Page3]`

| `site.collections`
| `RoqCollections`
| All the collections in this site (containing documents)
| `{"collection1": Collection1, "collection2": Collection2}`

| `site.title`
| `String`
| The site title
| `My Site`

| `site.description`
| `String`
| The site description
| `A description`

| `site.img`
| `RoqUrl`
| The site image URL if present
| `http://example.com/static/images/site.png`

| `site.url(Object path, Object... others)`
| `RoqUrl`
| Shortcut for site.url.resolve(path)
| `site.url.resolve("/about") => http://example.com/my-roq-site/about`
|===
====

* The `page` variable is available in pages, documents, layouts, and partials. It contains the info for the page it is used from.
+
.Show attributes
[%collapsible]
====
[cols="1,1,1,1", options="header"]
|===
| Variable | Type | Description | Example

| `page.url`
| `RoqUrl`
| The URL to this page
| `http://example.com/about`

| `page.info`
| `PageInfo`
| The page info (file name, ...)
|

| `page.data`
| `JsonObject`
| The FM data of this page
| `{"title": "About Us", "description": "This is the about us page."}`

| `page.paginator`
| `Paginator`
| The paginator if any
| `Paginator{currentPage=1, totalPages=5}`

| `page.collection`
| `String`
| The collection id if this a document
| `posts`

| `page.title()`
| `String`
| The title of the page (shortcut from FM)
| `About Us`

| `page.description()`
| `String`
| The description of the page (shortcut from FM)
| `This is the about us page.`

| `page.img()`
| `RoqUrl`
| The image URL of the page if present
| `http://example.com/static/images/about.png`

| `page.date()`
| `ZonedDateTime`
| The publication date of the page
| `2023-10-01T12:00:00Z`
|===
====

=== Pages

Any directory without the `_` prefix in the site directory will be scanned for pages content.

Let's create your first page and spice things up a bit by using Markdown.

[source,html]
.roq-bottom.md
----
---
title: Roq Bottom
description: When you hit Roq bottom, try Roq to climb back up!
layout: :theme/page
link: /climb-back-up <1>
the-rope: You Roq! <2>
---

# Roq Bottom

If you thought you hit Roq Bottom, take this ü™¢ because :

__{page.data.the-rope}!__ <3>

----

<1> you can use `link` to give this page a custom link (by default it will use the file-name).
<2> you can add other FM data.
<3> FM data is available through `page.data`.

=== Asciidoc support

We will soon introduce support for asciidoc, this will be available by adding an extension to the pom.xml:
https://github.com/quarkiverse/quarkus-roq/issues/169

=== Collections

Collections are a great way to group related content such as blog posts, recipes, member of a team or talks at a conference.
Once created you can easily iterate and link to them.

By default, Roq is configured with a `posts` collection using the `content/posts` directory. Let's create our first post:

[source,html]
.content/posts/2024-10-14-roq-solid.md
----
---
title: Roq bad puns
description: Roq is very good for bad puns ü§≠
layout: :theme/post <1>
tags: <2>
  - funny
  - ai
img: 2024/10/roq-solid.jpg
---

# {page.title} <3>

Here is a list of puns suggested by Chat GPT:
1.	Roq and Rule ‚Äì A play on ‚Äúrock and roll,‚Äù implying dominance or success.
2.	Between a Roq and a Hard Place ‚Äì Classic pun meaning stuck in a difficult situation.
3.	Roq Solid ‚Äì Something that is extremely reliable or stable.
4.	You Roq! ‚Äì A compliment, suggesting someone is awesome or does something well.
5.	Roq Bottom ‚Äì Referring to the lowest possible point, often used metaphorically.
6.	Roq the Boat ‚Äì To cause trouble or disturb the status quo.
7.	Roq Star ‚Äì A person who excels or stands out in their field.
8.	Let‚Äôs Roq ‚Äì Slang for getting started or doing something exciting.
9.	Roq On! ‚Äì An enthusiastic way to say ‚Äúkeep going‚Äù or ‚Äústay awesome.‚Äù
10.	Roqy Road ‚Äì Could be literal (the type of road) or metaphorical for a difficult journey.
11.	Roq of Ages ‚Äì A historical reference, often implying something long-standing and unchanging.
12.	Roq the Cradle ‚Äì Can be literal or a pun about nurturing or starting something new.
13.	Roqy Relationship ‚Äì A tumultuous or unstable relationship.
14.	Heavy as a Roq ‚Äì Something burdensome or difficult to manage.
15.	Stone Cold Roq ‚Äì Referring to something very cool or emotionless.

----
<1> This time we use the `post` layout from the theme.
<2> You can define tags (see xref:quarkus-roq-plugins.adoc#plugin-tagging[Plugins] to create pages for tags).
<3> You have shortcut on the `page` to access `title` and `description`.

Then let's edit our index page to show the list of posts:

[source,html]
.content/index.html
----
---
title: Hello Roqers
description: It is time to start Roqing üé∏!
layout: main
---

<h1>Hello fellow Roqers ü§ò</h1>


{#for post in site.collections.posts} // <1>
<article class="post">
  {#if post.img}
  <a class="post-thumbnail" style="background-image: url({post.img})" href="{post.url}"></a> // <2> <3>
  {/if}
  <div class="post-content">
    <h2 class="post-title"><a href="{post.url}">{post.title}</a></h2>
    <p>{post.description}</p>
    <span class="post-date">{post.date.format('yyyy, MMM dd')}&nbsp;&nbsp;&nbsp;‚Äî&nbsp;</span> // <4>
    <span class="post-words">
      {post.readTime} minute read <5>
    </span>
  </div>
</article>
{/for}
----
<1> You can use `site.collections.[collection id]` to access the full list of documents (it is also possible to xref:quarkus-roq-frontmatter.adoc#pagination[paginate].
<2> `post.img` is smart and is already resolved to the image url (as a RoqUrl).
<3> `post.url` contains the post url (as a RoqUrl), you could also use `post.url.absolute` to get the absolute url.
<4> `post.date` returns a `ZonedDateTime` and can be formatted the way you want.
<5> `post.readTime` is a Qute template extension which compute the read time based on the post content.

=== Static files

By default, all files in `static/` are treated as static..

=== Styles and Javascript

NOTE: The Quarkus Web Bundler is included by default with the Roq extension.

You can add css and scripts in your static directory or bundle them.
To use bundling scripts (js, ts) and styles (css, scss) should be located in `src/main/web/app/`. To include the generated bundle in your template, specify the bundle tag in the `html>head` tag:

[source,html]
.layouts/head.html
----
<head>
  ...
  {#bundle /}
</head>
----

It will be rendered with the relevant `<script>` and `<style>` tags to include your bundle.

You may also consume and bundle npm dependencies among other cool things.
For more info, read the https://docs.quarkiverse.io/quarkus-web-bundler/dev/[Quarkus Web Bundler documentation].



